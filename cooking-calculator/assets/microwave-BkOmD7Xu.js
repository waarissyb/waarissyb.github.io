import{r as m}from"./app-Bl0R_A-f.js";import{p as c}from"./persist-form-DKayIese.js";class d{constructor(t){this.el=t,this.id=t.id,this.controls=Array.from(document.querySelectorAll(`button[aria-controls="${this.id}"]`)),this.output=document.querySelector(`output[for="${this.id}"]`),this.timer=null,this.setBounds(),t.addEventListener("input",()=>this.setValue(t.value,!0)),t.addEventListener("blur",()=>{t.value===""&&this.hasMin&&this.setValue(this.min,!0)}),t.addEventListener("keydown",e=>this.handleKey(e)),this.controls.forEach(e=>e.addEventListener("click",()=>this.handleClick(e))),this.setValue(t.value)}clamp(t){return Math.min(Math.max(t,this.min),this.max)}parseValue(t){const e=String(t).trim();if(!e)return null;const i=parseInt(e.replace(/[^\d-]/g,""),10);return Number.isNaN(i)?null:i}setBounds(){const t=this.el;this.hasMin=t.hasAttribute("aria-valuemin"),this.hasMax=t.hasAttribute("aria-valuemax"),this.min=this.hasMin?+t.getAttribute("aria-valuemin"):Number.MIN_SAFE_INTEGER,this.max=this.hasMax?+t.getAttribute("aria-valuemax"):Number.MAX_SAFE_INTEGER}isValid(t){if(t===""||t===null)return!0;const e=+t;return!(this.hasMin&&e<this.min||this.hasMax&&e>this.max)}snapValue(t,e){let i=t;return this.hasMin&&(i=Math.max(i,this.min)),this.hasMax&&(i=Math.min(i,this.max)),i<e&&t>e||i>e&&t<e?e:i}setValue(t,e=!1){let i=typeof t=="number"?t:this.parseValue(t);if(!e){const a=+this.el.value||0;i=this.snapValue(i,a)}if(i===null){this.el.value="",this.el.ariaValueNow="",this.el.ariaInvalid=null,this.updateButtonStates();return}this.el.value=i,this.el.ariaValueNow=String(i),this.el.ariaInvalid=this.isValid(i)?null:"true",this.updateButtonStates()}updateButtonStates(){const t=+this.el.value;this.controls.forEach(e=>{const i=e.getAttribute("data-spinbutton-operation");e.ariaDisabled=(i==="decrement"?t<=this.min:t>=this.max)?"true":null})}announce(){this.output&&(this.output.textContent=this.el.value,clearTimeout(this.timer),this.timer=setTimeout(()=>{this.output.textContent="",this.timer=null},this.output.dataset.selfDestruct||1e3))}handleKey(t){let e=+this.el.value||0;t.key==="ArrowUp"||t.key==="ArrowDown"?(t.preventDefault(),this.setValue(e+(t.key==="ArrowUp"?1:-1)),this.announce()):t.key==="Home"?(t.preventDefault(),this.setValue(this.min),this.announce()):t.key==="End"&&(t.preventDefault(),this.setValue(this.max),this.announce())}handleClick(t){const e=t.getAttribute("data-spinbutton-operation")==="decrement"?-1:1;this.setValue((+this.el.value||0)+e),this.announce()}}function p(s=document){return Array.from(s.querySelectorAll('[role="spinbutton"]')).map(t=>new d(t))}function f({minutes:s,seconds:t,recommendedWattage:e,microwaveWattage:i}){const a=Number(s)||0,u=Number(t)||0,o=parseInt(e,10),l=parseInt(i,10);if(Number.isNaN(o)||Number.isNaN(l)||a<=0&&u<=0)return{label:"Time not set",text:"--:--",datetime:null};const h=(a*60+u)*(o/l),n=String(Math.floor(h/60)).padStart(2,"0"),r=String(Math.round(h%60)).padStart(2,"0");return{label:`Adjusted time: ${n} minutes and ${r} seconds`,text:`${n}:${r}`,datetime:`PT${n}M${r}S`}}function v(){const s=document.querySelector('[data-calc="microwave"]');if(!s)return;const t=s.querySelector("time");t&&(c(s,"calc:microwave"),s.addEventListener("input",()=>{const e=new FormData(s),i=f({minutes:e.get("minutes"),seconds:e.get("seconds"),recommendedWattage:e.get("recommendedWattage"),microwaveWattage:e.get("microwaveWattage")});t.textContent=i.text,t.setAttribute("aria-label",i.label),i.datetime?t.setAttribute("datetime",i.datetime):t.removeAttribute("datetime")}),p(s),s.dispatchEvent(new Event("input",{bubbles:!0})))}m();v();
